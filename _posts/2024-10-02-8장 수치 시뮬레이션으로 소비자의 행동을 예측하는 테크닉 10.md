---
# Header
title: "8.ìˆ˜ì¹˜ ì‹œë®¬ë ˆì´ì…˜ìœ¼ë¡œ ì†Œë¹„ìì˜ í–‰ë™ì„ ì˜ˆì¸¡í•˜ëŠ” í…Œí¬ë‹‰ 10"
excerpt: "ìˆ˜ì¹˜ ì‹œë®¬ë ˆì´ì…˜ìœ¼ë¡œ ì†Œë¹„ìì˜ í–‰ë™ì„ ì˜ˆì¸¡í•˜ëŠ” í…Œí¬ë‹‰ 10"
name: J
writer: J
categories: [ë°ë¹„&ì¶”ì²œì‹œìŠ¤í…œ, íŒŒì´ì¬ ë°ì´í„°ë¶„ì„ ì‹¤ë¬´ í…Œí¬ë‹‰ 100] # [ë©”ì¸ ì¹´í…Œê³ ë¦¬, ì„œë¸Œ ì¹´í…Œê³ ë¦¬]
tags:
  - [Khuda, ML, data]

toc: true
toc_sticky: true

date: 2024-10-29
last_modified_at: 2024-10-29

# --- ì•„ë˜ ë¶€í„° content
---
ğŸ”–ì „ì œì¡°ê±´
- links.csv: 
    - ì¬êµ¬ë§¤ ê³ ê° 20ëª…ì˜ SNS ì—°ê²° ìƒíƒœ 
    - ì—°ê²°ì´ ìˆìœ¼ë©´ 1, ì—†ìœ¼ë©´ 0
- links_members.csv: 
    - ëª¨ë“  ì¬êµ¬ë§¤ ê³ ê° 540ëª…ì˜ SNS ì—°ê²° ìƒíƒœ
- info_members.csv: 
    - ëª¨ë“  ì¬êµ¬ë§¤ ê³ ê° 540ëª…ì˜ 2ë…„ê°„ ë§¤ì›” ì´ìš© í˜„í™©ì´ ì €ì¥ 
    - ì´ìš© ì‹¤ì ì´ ìˆìœ¼ë©´ 1, ì—†ìœ¼ë©´ 0

# 071.ì¸ê°„ê´€ê³„ ë„¤íŠ¸ì›Œí¬ë¥¼ ê°€ì‹œí™”í•´ ë³´ì

### ë°ì´í„° ë¶ˆëŸ¬ì˜¤ê¸°

```py
import pandas as pd

df_links = pd.read_csv("links.csv")
df_links
```
![alt text](/assets/img_20241102/image-14.png)

### ë„¤íŠ¸ì›Œí¬ ê°€ì‹œí™”

```py
import networkx as nx
import matplotlib.pyplot as plt

# ê·¸ë˜í”„ ê°ì²´ ìƒì„±
G = nx.Graph()
# ë„¤íŠ¸ì›Œí¬ ì†ì„± ë¶€ì—¬

# ë…¸ë“œ ì„¤ì •
NUM = len(df_links.index)
# ë…¸ë“œì˜ ê°¯ìˆ˜
for i in range(1,NUM+1):
    node_no = df_links.columns[i].strip("Node")
    # strip: ì „ë‹¬í•œ ì¸ìê°€ ì œê±°ëœ ë¬¸ìì—´ì˜ ë³µì‚¬ë³¸ì„ ëŒë ¤ì¤ë‹ˆë‹¤.
    G.add_node(str(node_no))

# ì—£ì§€ ì„¤ì •
for i in range(NUM):
    for j in range(NUM):
        node_name = "Node" + str(j)
        if df_links[node_name].iloc[i]==1:
            G.add_edge(str(i),str(j))
        
# ê·¸ë¦¬ê¸°
nx.draw_networkx(G,node_color="k", edge_color="k", font_color="w")
# ì—°ê²°ì´ ë§ì€ ë…¸ë“œë¥¼ ì¤‘ã……ã…ì— ì˜¤ê²Œ ìë™ìœ¼ë¡œ ìœ„ì¹˜ ê²°ì •
plt.show()
```

# 072.ì…ì†Œë¬¸ì— ì˜í•œ ì •ë³´ ì „íŒŒ ëª¨ìŠµì„ ê°€ì‹œí™”í•´ ë³´ì

### ì…ì†Œë¬¸ ì „íŒŒ ê³„ì‚°
â—10ê°œì˜ ì—°ê²° ì¤‘ í•˜ë‚˜ì˜ í™•ë¥ (10%ì˜ í™•ë¥ )ë¡œ ì†Œë¬¸ì´ ì „íŒŒëœë‹¤ë¼ê³  ê°€ì •

```py
import numpy as np

# ì…ì†Œë¬¸ì˜ ì „íŒŒ ì—¬ë¶€ë¥¼ í™•ë¥ ì ìœ¼ë¡œ ê²°ì •.
def determine_link(percent):
    rand_val = np.random.rand()
    # np.random.rand(): 0~1ì˜ ê· ì¼ë¶„í¬ í‘œì¤€ì •ê·œë¶„í¬ ë‚œìˆ˜ë¥¼ ìƒì„±.
    if rand_val<=percent:
        return 1
    else:
        return 0

# ì…ì†Œë¬¸ì„ ì‹œë®¬ë ˆì´ì…˜
def simulate_percolation(num, list_active, percent_percolation):
    # num: ì‚¬ëŒ ìˆ˜ / list_active: ê°ê°ì˜ ë…¸ë“œì— ì…ì†Œë¬¸ì´ ì „ë‹¬ëëŠ”ì§€ë¥¼ 1 or 0 / percent_percolation: ì…ì†Œë¬¸ì„ ì¼ìœ¼í‚¬ í™•ë¥ 
    for i in range(num):
        if list_active[i]==1:
            for j in range(num):
                node_name = "Node" + str(j)
                if df_links[node_name].iloc[i]==1:
                    if determine_link(percent_percolation)==1:
                        list_active[j] = 1
    return list_active

percent_percolation = 0.1
# ì…ì†Œë¬¸ì„ ì¼ìœ¼í‚¬ í™•ë¥  10%
T_NUM = 36
# 36ê°œì›” ë°˜ë³µ
NUM = len(df_links.index)
# ì‚¬ëŒ ìˆ˜
list_active = np.zeros(NUM)
list_active[0] = 1
# ì²«ë²ˆì§¸ ì‚¬ëŒì—ê²Œ ì…ì†Œë¬¸ ëƒ„.

list_timeSeries = []
for t in range(T_NUM):
    list_active = simulate_percolation(NUM, list_active, percent_percolation)
    list_timeSeries.append(list_active.copy())
```

### ì…ì†Œë¬¸ ì „íŒŒ ê°€ì‹œí™”

```py
# ì•¡í‹°ë¸Œ ë…¸ë“œ ê°€ì‹œí™” #
def active_node_coloring(list_active):
    #print(list_timeSeries[t])
    list_color = []
    for i in range(len(list_timeSeries[t])):
        if list_timeSeries[t][i]==1:
            list_color.append("r")
        else:
            list_color.append("k")
    #print(len(list_color))
    return list_color

# ê·¸ë¦¬ê¸°
t = 0
nx.draw_networkx(G,font_color="w",node_color=active_node_coloring(list_timeSeries[t]))
plt.show()
```
![alt text](/assets/img_20241102/image-15.png)

```py
# ê·¸ë¦¬ê¸°
t = 11
nx.draw_networkx(G,font_color="w",node_color=active_node_coloring(list_timeSeries[t]))
plt.show()
```
![alt text](/assets/img_20241102/image-16.png)

```py
# ê·¸ë¦¬ê¸°
t = 35
nx.draw_networkx(G,font_color="w",node_color=active_node_coloring(list_timeSeries[t]))
plt.show()
```
![alt text](/assets/img_20241102/image-17.png)

# 073.ì…ì†Œë¬¸ ìˆ˜ì˜ ì‹œê³„ì—´ ë³€í™”ë¥¼ ê·¸ë˜í”„í™”í•´ ë³´ì

### ì…ì†Œë¬¸ ìˆ˜ì˜ ì‹œê³„ì—´ ë³€í™”

```py
# ì‹œê³„ì—´ ê·¸ë˜í”„ ê·¸ë¦¬ê¸°
list_timeSeries_num = []
for i in range(len(list_timeSeries)):
    list_timeSeries_num.append(sum(list_timeSeries[i]))

plt.plot(list_timeSeries_num)
plt.show()
```
![alt text](/assets/img_20241102/image-18.png)

# 074. íšŒì› ìˆ˜ì˜ ì‹œê³„ì—´ ë³€í™”ë¥¼ ì‹œë®¬ë ˆì´ì…˜í•´ ë³´ì

ì…ì†Œë¬¸ì„ í†µí•´ ìŠ¤í¬ì¸  ì„¼í„°ì˜ ì´ìš© ìƒí™©ì´ ì–´ë–»ê²Œ ë³€í™”í•´ê°€ëŠ”ì§€ ì‹œë®¬ë ˆì´ì…˜

### íšŒì›ìˆ˜ì˜ ì‹œê³„ì—´ë³€í™”ë¥¼ ì‹œë®¬ë ˆì´ì…˜í•´ë³´ì

```py
def simulate_population(num, list_active, percent_percolation, percent_disapparence,df_links):
    # í™•ì‚° #
    for i in range(num):
        if list_active[i]==1:
            for j in range(num):
                if df_links.iloc[i][j]==1:
                    if determine_link(percent_percolation)==1:
                        list_active[j] = 1
    # ì†Œë©¸ #
    for i in range(num):
        if determine_link(percent_disapparence)==1:
            list_active[i] = 0
    return list_active

percent_percolation = 0.1
percent_disapparence = 0.05
T_NUM = 100
NUM = len(df_links.index)
list_active = np.zeros(NUM)
list_active[0] = 1

list_timeSeries = []
for t in range(T_NUM):
    list_active = simulate_population(NUM, list_active, percent_percolation, percent_disapparence,df_links)
    list_timeSeries.append(list_active.copy())

# ì‹œê³„ì—´ ê·¸ë˜í”„ ê·¸ë¦¬ê¸°
list_timeSeries_num = []
for i in range(len(list_timeSeries)):
    list_timeSeries_num.append(sum(list_timeSeries[i]))

plt.plot(list_timeSeries_num)
plt.show()
```
![alt text](/assets/img_20241102/image-19.png)

# 075.íŒŒë¼ë¯¸í„° ì „ì²´ë¥¼ 'ìƒê´€ê´€ê³„'ë¥¼ ë³´ë©´ì„œ íŒŒì•…í•´ ë³´ì

### íŒŒë¼ë¯¸í„° ì „ì²´ ëª¨ìŠµ

```py
# ìƒê´€ê´€ê³„ ê³„ì‚°
print("ìƒê´€ê´€ê³„ ê³„ì‚°ì‹œì‘")
T_NUM = 100
NUM_PhaseDiagram = 20
phaseDiagram = np.zeros((NUM_PhaseDiagram,NUM_PhaseDiagram))
for i_p in range(NUM_PhaseDiagram):
    for i_d in range(NUM_PhaseDiagram):
        percent_percolation = 0.05*i_p
        percent_disapparence = 0.05*i_d
        list_active = np.zeros(NUM)
        list_active[0] = 1
        for t in range(T_NUM):
            list_active = simulate_population(NUM, list_active, percent_percolation, percent_disapparence,df_links)
        phaseDiagram[i_p][i_d] = sum(list_active)
print(phaseDiagram)

# í‘œì‹œ
plt.matshow(phaseDiagram)
plt.colorbar(shrink=0.8)
plt.xlabel('percent_disapparence')
plt.ylabel('percent_percolation')
plt.xticks(np.arange(0.0, 20.0,5), np.arange(0.0, 1.0, 0.25))
plt.yticks(np.arange(0.0, 20.0,5), np.arange(0.0, 1.0, 0.25))
plt.tick_params(bottom=False,
                left=False,
                right=False,
                top=False)
plt.show()
```
![alt text](/assets/img_20241102/image-20.png)

# 076.ì‹¤ì œ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì™€ë³´ì

- links_members.csv: 540ëª… ê°ê°ì˜ SNS ì—°ê²°ì„ ì €ì¥
- info_members.csv: 
    - 540ëª…ì˜ 24ê°œì›”ê°„ ì´ìš© í˜„í™©
    - 1: ì´ìš©í•œ ë‹¬
    - 0: ì´ìš©í•˜ì§€ ì•Šì€ ë‹¬

```py
import pandas as pd

df_mem_links = pd.read_csv("links_members.csv")
df_mem_info = pd.read_csv("info_members.csv")
df_mem_links
```
![alt text](/assets/img_20241102/image-21.png)

# 077.ë§í¬ ìˆ˜ì˜ ë¶„í¬ë¥¼ ê°€ì‹œí™”í•´ ë³´ì

- ë„¤íŠ¸ì›Œí¬ êµ¬ì¡°
    - ìŠ¤ëª° ì›”ë“œí˜•: ëª‡ ì•ˆ ë˜ëŠ” ìŠ¤í…ìœ¼ë¡œ ì „ì›ì´ ì—°ê²°ë¨
    - ìŠ¤ì¼€ì¼ í”„ë¦¬í˜•: ì†Œìˆ˜ì˜ ì—°ê²°

### ë§í¬ ìˆ˜ì˜ ë¶„í¬

```py
NUM = len(df_mem_links.index)
array_linkNum = np.zeros(NUM)
for i in range(NUM):
    array_linkNum[i] = sum(df_mem_links["Node"+str(i)])

plt.hist(array_linkNum, bins=10,range=(0,250))
plt.show()
```
![alt text](/assets/img_20241102/image-22.png)

- ìŠ¤ì¼€ì¼ í”„ë¦¬í˜• ì´ë¼ë©´? -> ë§í¬ë¥¼ ë§ì´ ê°€ì§„ í—ˆë¸Œê°€ ì‘ë™í•˜ì§€ ì•Šìœ¼ë©´ ì…ì†Œë¬¸ì´ ì¤‘ê°„ì— í¼ì§€ì§€ ì•ŠìŒ.
- ì´ ë¶„í¬ëŠ” í—ˆë¸Œì— ì˜ì¡´í•˜ì§€ ì•Šê³  ì…ì†Œë¬¸ì´ í¼ì§€ê¸° ì‰½ë‹¤.

# 078.ì‹œë®¬ë ˆì´ì…˜ì„ ìœ„í•´ ì‹¤ì œ ë°ì´í„°ë¡œë¶€í„° íŒŒë¼ë¯¸í„°ë¥¼ ì¶”ì •í•˜ì

â­ì¤‘ìš”í•œ íŒŒë¼ë¯¸í„°: percent_percolation, percent_disapparence

```py
NUM = len(df_mem_info.index)
# ì‚¬ëŒìˆ˜
T_NUM = len(df_mem_info.columns)-1
# ê°œì›”ìˆ˜
# ì†Œë©¸ í™•ë¥  ì¶”ì • #
count_active = 0
count_active_to_inactive = 0
for t in range(1,T_NUM):
    for i in range(NUM):
        if (df_mem_info.iloc[i][t]==1):
            count_active_to_inactive += 1
            if (df_mem_info.iloc[i][t+1]==0):
                count_active += 1
estimated_percent_disapparence = count_active/count_active_to_inactive
# 1ìŠ¤í… ì „ê³¼ ë¹„êµí•´ì„œ í™œì„±ì´ ë¹„í™œì„±ìœ¼ë¡œ ë³€í™”í•œ ë¹„ìœ¨!

# í™•ì‚° í™•ë¥  ì¶”ì • #
count_link = 0
count_link_to_active = 0
count_link_temp = 0
for t in range(T_NUM-1):
    df_link_t = df_mem_info[df_mem_info[str(t)]==1]
    # í™œë™ì¤‘ì¸ ì• ë“¤ë§Œ ë½‘ì•„
    temp_flag_count = np.zeros(NUM)
    for i in range(len(df_link_t.index)):
        # í™œë™ì¤‘ì¸ ì• ë“¤ì¤‘...
        df_link_temp = df_mem_links[df_mem_links["Node"+str(df_link_t.index[i])]==1]
        # "Node"+str(df_link_t.index[i])ì™€ linkê°€ ë˜ì–´ìˆëŠ” ì• ë“¤ë§Œ ë½‘ì•„!
        for j in range(len(df_link_temp.index)):
            if (df_mem_info.iloc[df_link_temp.index[j]][t]==0):
                # të‹¬ì— ë¹„í™œë™ 
                if (temp_flag_count[df_link_temp.index[j]]==0):
                    count_link += 1
                if (df_mem_info.iloc[df_link_temp.index[j]][t+1]==1):
                    # t+1ë‹¬ì— í™œë™ì´ë©´
                    if (temp_flag_count[df_link_temp.index[j]]==0):
                        temp_flag_count[df_link_temp.index[j]] = 1 
                        count_link_to_active += 1
estimated_percent_percolation = count_link_to_active/count_link

print(estimated_percent_disapparence)
# 0.10147163541419416

print(estimated_percent_percolation)
# 0.025184661323275185
```


# 079.ì‹¤ì œ ë°ì´í„°ì™€ ì‹œë®¬ë ˆì´ì…˜ì„ ë¹„êµí•˜ì

```py
percent_percolation = 0.025184661323275185
percent_disapparence = 0.10147163541419416
T_NUM = 24
NUM = len(df_mem_links.index)
# ì‚¬ëŒ ìˆ˜
list_active = np.zeros(NUM)
list_active[0] = 1
list_timeSeries = []
for t in range(T_NUM):
    list_active = simulate_population(NUM, list_active, percent_percolation, percent_disapparence,df_mem_links)
    list_timeSeries.append(list_active.copy())

list_timeSeries_num = []
for i in range(len(list_timeSeries)):
    list_timeSeries_num.append(sum(list_timeSeries[i]))
# ê°œì›”ë³„ 1ê³¼ 0ì˜ í•©

T_NUM = len(df_mem_info.columns)-1
# ì²˜ìŒì— ì´ìƒí•œ ì—´ ë¹¼ê³  ê°œì›”ìˆ˜
list_timeSeries_num_real = []
for t in range(0,T_NUM):
    list_timeSeries_num_real.append(len(df_mem_info[df_mem_info[str(t)]==1].index))
    # í•´ë‹¹ ë‹¬ì˜ ì‹¤ì œ í™œë™ ì¤‘ì´ë˜ ì‚¬ëŒì˜ ìˆ˜

plt.plot(list_timeSeries_num, label = 'simulated')
plt.plot(list_timeSeries_num_real, label = 'real')
plt.xlabel('month')
plt.ylabel('population')
plt.legend(loc='lower right')
plt.show()
```
![alt text](/assets/img_20241102/image-23.png)

# 080.ì‹œë®¬ë ˆì´ì…˜ìœ¼ë¡œ ë¯¸ë˜ë¥¼ ì˜ˆì¸¡í•´ ë³´ì

```py
percent_percolation = 0.025184661323275185
percent_disapparence = 0.10147163541419416
T_NUM = 36
NUM = len(df_mem_links.index)
list_active = np.zeros(NUM)
list_active[0] = 1
list_timeSeries = []
for t in range(T_NUM):
    list_active = simulate_population(NUM, list_active, percent_percolation, percent_disapparence,df_mem_links)
    list_timeSeries.append(list_active.copy())

list_timeSeries_num = []
for i in range(len(list_timeSeries)):
    list_timeSeries_num.append(sum(list_timeSeries[i]))

plt.plot(list_timeSeries_num, label = 'simulated')
plt.xlabel('month')
plt.ylabel('population')
plt.legend(loc='lower right')
plt.show()
```
![alt text](/assets/img_20241102/image-24.png)